<html lang="en">
  <head>
  </head>
  <body onload="onLoad()" onBeforeUnload="onUnload()">
    <a href="0.3.html">
    <img src="0.2.png" /> 
    <br/>
    </a>

    <!--- js -->
    <script>
    var currentUser;
    var jManager;
    var timer;

    var onLoad = function()
    {
      jManager = new JourneyManager();
      var stracturedUser = jManager.loadUser();
      currentUser = new User();
      currentUser.unstructurize(stracturedUser);
      console.log("user loaded :");
      currentUser.print();

      //setup ltimer
      var d = new Date();
      timer = d.getTime();
    }

    var onUnload = function()
    {
      //get exit time
      var d = new Date();
      var n = d.getTime();

      //add new step
      var type = "Website";
      var tags = ["Dylan Thomas","birthplace"];
      var time = Math.floor((n-timer)/1000);
      var content = new Object();
      content.thumbnail = "0.2_thumb.png";
      content.headline = "Creating the Thomas myth";
      content.teaser = "In an extract from Arena's Dylan Thomas: From Grave to Cradle from 2003, presenter Nigel Williams reflects on the poet as a rebel, his American success and the cultivation of the Thomas myth.";

      currentUser.addNewStep(type , tags, time, content);
      jManager.saveUser(currentUser);
      console.log("unloaded");
    }
    </script>

    <script src="../js/journeyManager.js"></script>
    <script src="../js/journey.js"></script>
    <script src="../js/User.js"></script>
    <script src="../js/Walk.js"></script>
    <script src="../js/Step.js"></script>

  </body>
 </html>